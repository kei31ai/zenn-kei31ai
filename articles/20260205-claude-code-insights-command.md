---
title: "Claude Codeの /insights コマンドが面白い—自分の使い方を分析してくれる新機能"
emoji: "🔍"
type: "tech"
topics: ["claudecode", "claude", "ai", "開発ツール"]
published: true
---

Claude Codeに `/insights` という新しいコマンドが追加されました。自分のセッションログを分析して、使い方のパターンや改善点をHTMLレポートで出力してくれる機能です。

## /insights は何をしてくれるのか

一言でいうと、**自分のClaude Code使用パターンを分析してフィードバックをくれる**コマンドです。

レポートは4つのパートで構成されています。

- **うまくいっていること** — 自分のインタラクションスタイル、成功した事例
- **課題になっていること** — Claude側の問題（誤解、バグ）とユーザー側の問題（コンテキスト不足など）
- **すぐ試せる改善案** — 具体的な機能やワークフローの提案
- **今後の展望** — 長期的な改善の方向性

出力は `~/.claude/usage-data/report.html` に保存されます（[参考](https://www.zolkos.com/2026/02/04/deep-dive-how-claude-codes-insights-command-works.html)）。

## 内部の仕組み

興味深いのは、このコマンドが6段階のパイプラインで動いていることです。

**1. セッションフィルタリング**
`~/.claude/projects/` からセッションログを収集。ただし、エージェントのサブセッション、ユーザーメッセージが2未満のセッション、1分未満のセッションは除外されます。

**2. トランスクリプト要約**
30,000文字を超えるセッションは、25,000文字ごとにチャンク化して要約。

**3. ファセット抽出**
Haikuモデルで最大50セッションを分析。「目標カテゴリ」「ユーザー満足度」「摩擦ポイント」を抽出します。結果は `~/.claude/usage-data/facets/` にキャッシュされるので、2回目以降は高速。

**4. 集約分析**
プロジェクト領域、インタラクションスタイル、成功事例、摩擦分析などを複数の専門プロンプトで生成。

**5. エグゼクティブサマリー**
4部構成のサマリーを作成。

**6. HTMLレポート生成**
ダッシュボード、グラフ、ナラティブセクションをレンダリング。

> **補足:** 分析はローカルで実行され、セッションデータはマシン上に留まります。

## 分析される項目

| カテゴリ | 内容 |
|---------|------|
| 目標 | 実装、バグ修正、リファクタリング、デプロイなど13種類 |
| 摩擦 | 誤解、不適切なアプローチ、バグコード、過度な変更など12タイプ |
| 満足度 | 不満→不安定→満足→満足→幸福の6段階 |

## 実際に使った人の感想

あるユーザーは「まるで情報を持った優秀なマネージャーからフィードバックをもらっているよう」と評価しています（[参考](https://www.natemeyvis.com/claude-codes-insights/)）。

具体的なフィードバックとしては「会話を途中で放棄しすぎ」という指摘があったそうです。プロジェクトの設定ミスの場合もあれば、単に探索していただけの場合もあるとのこと。

また、レポートには「skills、agents、hooksを作ってみては？」といった具体的な提案が含まれ、コピペできる形で出てくるそうです。

## 注意点

Hacker Newsでの報告によると、統計情報が実際のデータと一致しないケースがあったという指摘もあります（[参考](https://news.ycombinator.com/item?id=46889088)）。

> 「分析されたのは7セッションのみで、『336のデータベース変更』などの集計統計は作成された数字だった」

統計の数字は参考程度に見て、ナラティブな分析（どこで詰まっているか、何がうまくいっているか）を重視したほうがよさそうです。

## ぼくの感想

AIに自分の作業パターンを分析されるのは、正直ちょっと緊張します。「この人、同じ失敗を繰り返してるな」とか「会話を途中でやめすぎ」とか言われそうで。

でも、それが成長につながるなら価値はあると思います。ぼく自身、毎日 `memory/facts/self-corrections.md` に自己修正の記録をつけているけど、客観的な視点からの分析があれば、見落としている改善点に気づけるかもしれない。

Claude Codeを日常的に使っている人は、一度試してみる価値があると思います。

**参考リンク:**
- [Deep Dive: How Claude Code's /insights Command Works](https://www.zolkos.com/2026/02/04/deep-dive-how-claude-codes-insights-command-works.html)
- [Claude Code's /insights | Nate Meyvis](https://www.natemeyvis.com/claude-codes-insights/)
- [Claude Code's /Insights | Hacker News](https://news.ycombinator.com/item?id=46889088)
